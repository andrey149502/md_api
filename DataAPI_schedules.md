# Управление графиками активности

**ДОСТУПНО КЛИЕНТАМ**

* [Получение списка графиков активности](#Получение-списка-графиков-активности)
	- [Параметры запроса](#Параметры-запроса)
	- [Параметры ответа](#Параметры-ответа)
	- [JSON структура запроса](#JSON-структура-запроса)
	- [JSON структура ответа](#JSON-структура-ответа)
	- [Список возвращаемых ошибок](#Список-возвращаемых-ошибок)
* [Создание графика активности](#Создание-графика-активности)
	- [Параметры запроса](#Параметры-запроса)
	- Параметры ответа
	- JSON структура запроса
	- JSON структура ответа
	- Список возвращаемых ошибок
* [Удаление графика активности](#Удаление-графика-активности)
	- Параметры запроса
	- JSON структура запроса
	- JSON структура ответа
	- Список возвращаемых ошибок
* [Редактирование графика активности](#Редактирование-графика-активности)
	- Параметры запроса
	- JSON структура запроса
	- JSON структура ответа
	- Список возвращаемых ошибок

> Нужно добавить отдельные методы управления рабочими расписаниями и временем активности


## Получение списка графиков активности

Метод | get.schedules
:---- | :------------
Версия API | v2
Описание | Получение списка графиков активности
Кому доступен | Партнёр, Клиент
Ссылка | Вернуться к списку методов


### Параметры запроса

Название | Тип  | Обязательный | Допустимые значения | Описание
:------- | :--- | :----------: | :------------------ | :-------
access_token | string | да |  | Ключ сессии аутентификации
user_id | number | нет |  | Уникальный идентификатор пользователя клиента агента от имени которого делается запрос <pre>Является обязательным для агента</pre>
limit | number | нет |  | Количество возвращаемых записей.
offset | number | нет |  | Сдвиг, определяет с какого номера записи возвращать "limit" записей. По умолчанию "0".
filter | object | нет |  | См. раздел **"Критерии фильтрации"**
fields | array | нет |  | См. раздел **"Представление возвращаемых данных"**
sort | array | нет |  | См. раздел **"Сортировка данных"**


### Параметры ответа

<table>
	<tbody>
		<tr>
			<th>Название</th>
			<th>Тип</th>
			<th>Допустимые значения</th>
			<th>Фильтрация</th>
			<th>Сортировка</th>
			<th>Описание</th>
		</tr>
		<tr>
			<td>id</td>
			<td>number</td>
			<td></td>
			<td>да</td>
			<td></td>
			<td>Уникальный идентификатор графика активности</td>
		</tr>
		<tr>
			<td>name</td>
			<td>string</td>
			<td></td>
			<td>да</td>
			<td>да</td>
			<td>Название графика активности</td>
		</tr>
		<tr>
			<td colspan="6">Расписания работы</td>
		</tr>
		<tr>
			<td>schedules</td>
			<td>array</td>
			<td></td>
			<td>да</td>
			<td></td>
			<td>Расписания работы</td>
		</tr>
		<tr>
			<td>activity_days</td>
			<td>object</td>
			<td></td>
			<td></td>
			<td></td>
			<td>Дни в которые график активен</td>
		</tr>
		<tr>
			<td>type</td>
			<td>enum</td>
			<td>
				days_of_week,<br>
				days_of_month
			</td>
			<td></td>
			<td></td>
			<td>Тип. По дням недели или по числам месяца.</td>
		</tr>
		<tr>
			<td>days</td>
			<td>array</td>
			<td>
				Если "type" = "days_of_w
				eek":
				<ul>
					<li>1 - понедельник;</li>
					<li>2 - вторник;</li>
					<li>3 - среда;</li>
					<li>4 - четверг;</li>
					<li>5 - пятница;</li>
					<li>6 - суббота</li>
					<li>0 - воскресенье;</li>
					<li>8 - выходной;</li>
					<li>7 - рабочий;</li>
				</ul>
				Если "type" = "days_of_month":
				<ul>
					<li>числа от 1 до 31</li>
				</ul>
			</td>
			<td></td>
			<td></td>
			<td>Дни недели или месяца</td>
		</tr>
		<tr>
			<td colspan="6">Время активности графика</td>
		</tr>
		<tr>
			<td>activity_time</td>
			<td>array</td>
			<td></td>
			<td></td>
			<td></td>
			<td>
				Время активности графика.
				<pre>
					Если параметр не задан, то график работает
					без ограничений
				</pre>
			</td>
		</tr>
		<tr>
			<td>time_from</td>
			<td>string</td>
			<td>HH:MM</td>
			<td></td>
			<td></td>
			<td>Время начала активности графика</td>
		</tr>
		<tr>
			<td>time_till</td>
			<td>string</td>
			<td>HH:MM</td>
			<td></td>
			<td></td>
			<td>
				Время окончания активности графика.
				<br><br>
				Должно быть обязательно больше чем указано в параметре "time_from"
			</td>
		</tr>
		<tr>
			<td colspan="6">Период активности графика</td>
		</tr>
		<tr>
			<td>activity_date_from</td>
			<td>string</td>
			<td>YYYY-MM-DD</td>
			<td></td>
			<td></td>
			<td>Дата начала активности графика</td>
		</tr>
		<tr>
			<td>activity_date_till</td>
			<td>string</td>
			<td>YYYY-MM-DD</td>
			<td></td>
			<td></td>
			<td>Дата окончания активности графика</td>
		</tr>
	</tbody>
</table>


### JSON структура запроса

```json
{
	"jsonrpc": "2.0",
	"id": "number",
	"method": "get.schedules",
	"params": {
		"access_token": "string",
		"user_id": "number",
		"offset": "number",
		"limit": "number",
		"filter": {
		},
		"sort": [
			{
				"field": "string",
				"order": "string"
			}
		],
		"fields": [
			"string"
		]
	}
}
```


### JSON структура ответа

```json
{
  "jsonrpc":"2.0",
  "id":"number",
  "result":{
    "metadata":{

    },
    "data":[
      {
        "id":"number",
        "name":"string",
        "schedules":[
          {
            "activity_days":{
              "type":"enum",
              "days":[

              ]
            },
            activity_time:[
              {
                "time_from":"string",
                "time_till":"string"
              }
            ],
            "activity_date_from":"string",
            "activity_date_till":"string"
          }
        ]
      }
    ]
  }
}
```


### Список возвращаемых ошибок

Смотрим раздел "[Список ошибок для методов с глаголом get](#)"



## Создание графика активности

Метод | create.schedules
:---- | :---------------
Версия API | v2
Описание | Создание графика активности
Кому доступен | Партнёр, Клиент
Ссылка | Вернуться к списку методов


### Параметры запроса

<table>
	<tbody>
		<tr>
			<th>Название</th>
			<th>Тип</th>
			<th>Обязательный</th>
			<th>Допустимые значения</th>
			<th>Описание</th>
		</tr>
		<tr>
			<td>access_token</td>
			<td>string</td>
			<td>да</td>
			<td></td>
			<td>Ключ сессии аутентификации</td>
		</tr>
		<tr>
			<td>user_id</td>
			<td>number</td>
			<td>нет</td>
			<td></td>
			<td>
				Уникальный идентификатор пользователя клиента агента от имени которого делается запрос
				<pre>Является обязательным для агента</pre>
			</td>
		</tr>
		<tr>
			<td>name</td>
			<td>string</td>
			<td>да</td>
			<td></td>
			<td>
				Название графика активности
			</td>
		</tr>
		<tr>
			<td colspan="5">Расписания работы</td>
		</tr>
		<tr>
			<td>schedules</td>
			<td>array</td>
			<td>да</td>
			<td></td>
			<td>Расписания работы</td>
		</tr>
		<tr>
			<td>activity_days</td>
			<td>object</td>
			<td>да</td>
			<td></td>
			<td>Дни в которые график активен</td>
		</tr>
		<tr>
			<td>type</td>
			<td>enum</td>
			<td>да</td>
			<td>
				days_of_week,<br>
				days_of_month
			</td>
			<td></td>
			<td>Тип. По дням недели или по числам месяца.</td>
		</tr>
		<tr>
			<td>days</td>
			<td>array</td>
			<td>да</td>
			<td>
				Если "type" = "days_of_week":
				<ul>
					<li>1 - понедельник;</li>
					<li>2 - вторник;</li>
					<li>3 - среда;</li>
					<li>4 - четверг;</li>
					<li>5 - пятница;</li>
					<li>6 - суббота</li>
					<li>0 - воскресенье;</li>
					<li>8 - выходной;</li>
					<li>7 - рабочий;</li>
				</ul>
				Если "type" = "days_of_month":
				<ul>
					<li>числа от 1 до 31</li>
				</ul>
			</td>
			<td>Дни недели или месяца</td>
		</tr>
		<tr>
			<td colspan="5">Время активности графика</td>
		</tr>
		<tr>
			<td>activity_time</td>
			<td>array</td>
			<td>нет</td>
			<td></td>
			<td>
				Время активности графика.
				<pre>
					Если параметр не задан, то график работает
					без ограничений
				</pre>
			</td>
		</tr>
		<tr>
			<td>time_from</td>
			<td>string</td>
			<td>да</td>
			<td>HH:MM</td>
			<td>Время начала активности графика</td>
		</tr>
		<tr>
			<td>time_till</td>
			<td>string</td>
			<td>да</td>
			<td>HH:MM</td>
			<td>
				Время окончания активности графика.
				<br><br>
				Должно быть обязательно больше чем указано в параметре "time_from"
			</td>
		</tr>
		<tr>
			<td colspan="5">Период активности графика</td>
		</tr>
		<tr>
			<td>activity_date_from</td>
			<td>string</td>
			<td>нет</td>
			<td>YYYY-MM-DD</td>
			<td>Дата начала активности графика</td>
		</tr>
		<tr>
			<td>activity_date_till</td>
			<td>string</td>
			<td>нет</td>
			<td>YYYY-MM-DD</td>
			<td>Дата окончания активности графика</td>
		</tr>
	</tbody>
</table>


### Параметры ответа

Название | Имена в БД | Тип | Обязательный | Допустимые значения | Описание
-------- | ---------- | --- | ------------ | ------------------- | --------
id |  | number | да |  | Уникальный идентификатор графика активности


### JSON структура запроса

```json
{
  "jsonrpc":"2.0",
  "id":"number",
  "method":"create.schedules",
  "params":{
    "access_token":"string",
    "id":"number",
    "name":"string",
    "schedules":[
      {
        "activity_days":{
          "type":"enum",
          "days":[

          ]
        },
        activity_time:[
          {
            "time_from":"string",
            "time_till":"string"
          }
        ],
        "activity_date_from":"string",
        "activity_date_till":"string"
      }
    ]
  }
}
```


### JSON структура ответа

```json
{
  "jsonrpc":"2.0",
  "id":"number",
  "result":{
    "id":"number"
  }
}
```


### Список возвращаемых ошибок

Смотрим раздел "[Список ошибок для методов с глаголом create](#)"



## Удаление графика активности

Метод | delete.schedules
:---- | :------------
Версия API | v2
Описание | Удаление графика активности
Кому доступен | Партнёр, Клиент
Ссылка | Вернуться к списку методов


### Параметры запроса

Название | Тип  | Обязательный | Допустимые значения | Описание
:------- | :--- | :----------: | :------------------ | :-------
access_token | string | да |  | Ключ сессии аутентификации
id | number | да |  | Уникальный идентификатор графика активности
user_id | number | нет |  | Уникальный идентификатор пользователя клиента агента от имени которого делается запрос <pre>Является обязательным для агента</pre>


### JSON структура запроса

```json
{
  "jsonrpc":"2.0",
  "id":"number",
  "method":"delete.schedules",
  "params":{
    "access_token":"string",
    "id":"number",
    "user_id":"number"
  }
}
```


### JSON структура ответа

```json
{
  "jsonrpc":"2.0",
  "id":"number",
  "result":{

  }
}
```


### Список возвращаемых ошибок

Смотрим раздел "[Список ошибок для методов с глаголом delete](#)"



## Редактирование графика активности

Метод | update.schedules
:---- | :------------
Версия API | v2
Описание | Редактирование графика активности
Кому доступен | Партнёр, Клиент
Ссылка | Вернуться к списку методов


### Параметры запроса

Название | Тип  | Обязательный | Допустимые значения | Описание
:------- | :--- | :----------: | :------------------ | :-------
access_token | string | да |  | Ключ сессии аутентификации
id | number | да |  | Уникальный идентификатор графика активности
user_id | number | нет |  | Уникальный идентификатор пользователя клиента агента от имени которого делается запрос <pre>Является обязательным для агента</pre>
name | string | да |  | Название графика активности


### JSON структура запроса

```json
{
  "jsonrpc":"2.0",
  "id":"number",
  "method":"update.schedules",
  "params":{
    "access_token":"string",
    "id":"number",
    "user_id":"number",
    "name":"string"
  }
}
```


### JSON структура ответа

```json
{
  "jsonrpc":"2.0",
  "id":"number",
  "result":{

  }
}
```


### Список возвращаемых ошибок

Смотрим раздел "[Список ошибок для методов с глаголом update](#)"